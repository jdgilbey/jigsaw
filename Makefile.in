# Use a handwritten Makefile rather than an automake mess for such
# a simple package.  But stick to familiar 
PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_VERSION = @PACKAGE_VERSION@
prefix = @prefix@
datarootdir = @datarootdir@
datadir = @datadir@
pkgdatadir = @datadir@/${PACKAGE_NAME}
docdir = @docdir@
mandir = @mandir@
exec_prefix = @exec_prefix@
bindir = @bindir@
MKDIR_P = @MKDIR_P@

build:
	sed -e 's|@pkgdatadir[@]|$(pkgdatadir)|; s|@PACKAGE_VERSION[@]|$(PACKAGE_VERSION)|;' jigsaw-generate.in > jigsaw-generate
	chmod a+x jigsaw-generate

install:
	$(MKDIR_P) ${DESTDIR}${bindir}
	cp jigsaw-generate ${DESTDIR}${bindir}
	chmod 755 ${DESTDIR}${bindir}/jigsaw-generate

	$(MKDIR_P) ${DESTDIR}${pkgdatadir}
	cp -a jigsaw filters templates ${DESTDIR}${pkgdatadir}
	chmod -R a+rX ${DESTDIR}${pkgdatadir}

	$(MKDIR_P) ${DESTDIR}${docdir}
	cp README.md COPYING ChangeLog AUTHORS ${DESTDIR}${docdir}
	cp -a examples ${DESTDIR}${docdir}
	chmod -R a+rX ${DESTDIR}${docdir}

	$(MKDIR_P) ${DESTDIR}${mandir}/man1
	cp jigsaw-generate.1 ${DESTDIR}${mandir}/man1
	chmod 644 ${DESTDIR}${mandir}/man1/jigsaw-generate.1

uninstall:
	rm -rf ${DESTDIR}${pkgdatadir}
	rm -rf ${DESTDIR}${docdir}
	rm -f ${DESTDIR}${bindir}/jigsaw-generate
	rm -f ${DESTDIR}${mandir}/man1/jigsaw-generate.1

